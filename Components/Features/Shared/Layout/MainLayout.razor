@inherits LayoutComponentBase
@inject NavigationManager Navigation

<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme" />
<MudDialogProvider />
<MudPopoverProvider />
<MudSnackbarProvider />

<div class="page-shell">
    <MudLayout>
        <MudMainContent>
            <div class="page-content">
                <div class="content-body">
                    <MudContainer MaxWidth="MaxWidth.Medium" Class="px-4">
                        @Body
                    </MudContainer>
                </div>

                @if (!ShouldHideFooter())
                {
                    <div class="footer-area">
                        <MudContainer MaxWidth="MaxWidth.Medium" Class="mt-16 mb-8">
                            <MudDivider Class="mb-4" />
                            <MudStack Row Justify="Justify.Center" AlignItems="AlignItems.Center" Spacing="2" Class="mb-2">
                                <MudLink Href="/privacy-policy" Underline="Underline.Hover" Color="Color.Secondary" data-umami-event="footer-privacy-click">
                                    <MudText Typo="Typo.caption">Privacy Policy</MudText>
                                </MudLink>
                                <MudLink Href="/rss" Underline="Underline.Hover" Color="Color.Secondary" data-umami-event="footer-rss-click">
                                    <MudText Typo="Typo.caption">RSS</MudText>
                                </MudLink>
                                <MudLink Href="/readme" Underline="Underline.Hover" Color="Color.Secondary" data-umami-event="footer-readme-click">
                                    <MudText Typo="Typo.caption">README</MudText>
                                </MudLink>
                            </MudStack>
                        </MudContainer>
                    </div>
                }
            </div>
        </MudMainContent>
    </MudLayout>
</div>

@code {
    private bool _isDarkMode = true;
    private MudTheme _theme = new MudTheme()
    {
        PaletteDark = new PaletteDark()
        {
            Primary = "#90caf9",
            Secondary = "#a8a8a8",
            Background = "#0e0e0e",
            Surface = "#0e0e0e",
            TextPrimary = "#b0b0b0",
            TextSecondary = "#a8a8a8",
            Divider = "#5f5f5f",
            ActionDefault = "#90caf9",
            Error = "#f44336",
            Warning = "#ff9800",
            Info = "#2196f3",
            Success = "#4caf50"
        },
        LayoutProperties = new LayoutProperties()
        {
            AppbarHeight = "0px"
        }
    };

    private bool ShouldHideFooter()
    {
        var uri = Navigation.ToBaseRelativePath(Navigation.Uri).ToLowerInvariant();
        return uri.StartsWith("link") || uri.StartsWith("repo") || uri.StartsWith("privacy");
    }
}

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload" data-umami-event="blazor-error-reload-click">Reload</a>
    <a class="dismiss" data-umami-event="blazor-error-dismiss-click">🗙</a>
</div>
